<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <p class="mb-0"><strong><%= "URL:" %></strong> <%= link_to @website.url, @website.url, target: "_blank", rel: "noopener" %></p>
  </div>

  <p class="mb-2">
    <strong><%= "Responses for: #{Date.today.strftime("%b %e, %Y")}" %></strong>
  </p>

  <div class="d-flex gap-2 flex-wrap mb-4">
    <%= link_to "Edit this website", edit_website_path(@website), class: "btn btn-primary btn-sm" %>
    <%= button_to "Destroy this website", website_path(@website), method: :delete, onclick: "return confirm('Are you sure you want to remove this website?');", class: "btn btn-danger btn-sm" %>
    <%= link_to "Back", root_path, class: "btn btn-secondary btn-sm" %>
  </div>

  <% if @website.response_count > 0 %>
    <h3 class="mb-3"><%= "Responses: #{@website.responses.count}" %></h3>
  <% end %>

  <% if @website.response_count > 0 %>
    <div class="table-responsive">
      <table class="table table-bordered align-middle table-striped">
        <thead class="table-light">
          <tr>
            <th><%= "Response ID" %></th>
            <th><%= "Status Code" %></th>
            <th><%= "Response time (ms)" %></th>
            <th><%= "Error" %></th>
            <th><%= "Time of Ping" %></th>
          </tr>
        </thead>
        <tbody>
          <% @responses.each do |response| %>
            <tr id=<%= "response-row-#{response.id}" %> class="<%= 'table-danger' if response.status_code > 400 %>">
              <td><%= response.id %></td>
              <td><%= response.status_code %></td>
              <td><%= response.response_time %></td>
              <td><%= response.error.presence || "N/A" %></td>
              <td><%= response.created_at.strftime("%b %e, %Y at %-l:%M%P") %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <%= paginate @responses %>
  <% else %>
    <p class="text-muted small mb-0">
      <%= "There are no responses yet for this website." %>
    </p>
  <% end %>
</div>
