<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <p class="mb-0 lightly-transparent"><strong><%= "URL:" %></strong> <%= link_to @website.url, @website.url, target: "_blank", rel: "noopener" %></p>
  </div>

  <p class="mb-2 lightly-transparent">
    <strong><%= "Responses for: #{Date.today.strftime("%b %e, %Y")}" %></strong>
  </p>

  <div class="d-flex gap-2 flex-wrap mb-3">
    <%= link_to "Edit website", edit_website_path(@website), class: "btn edit-website-button btn-sm" %>
    <%= button_to "Destroy website",
          website_path(@website),
          method: :delete,
          onclick: "return confirm('Are you sure you want to remove this website?');",
          data: { turbo: false },
          class: "btn destroy-website-button btn-sm" %>
    <%= link_to "Back", root_path, class: "btn back-button btn-sm" %>
  </div>

  <% if @failed_responses_total.positive? %>
    <div class="d-flex gap-2 flex-wrap mb-4">
      <%= link_to "Show All Responses",
                  website_path(@website),
                  class: "btn btn-sm #{@show_failed_only ? 'btn-outline-secondary' : 'btn-secondary active'}" %>
      <%= link_to "Show Today's Failed Responses",
                  website_path(@website, failed: true),
                  class: "btn btn-sm #{@show_failed_only ? 'btn-danger active' : 'btn-outline-danger'}" %>
    </div>
  <% end %>

  <% if @show_failed_only %>
    <p class="text-danger small lightly-transparent mb-4"><%= "Showing today's failed responses only." %></p>
  <% end %>

  <div class="row lightly-transparent mb-3">
    <% if @website.response_count > 0 %>
      <div class="col-auto">
        <h3 class="mb-0"><%= "Responses: #{@website.response_count}" %></h3>
      </div>
    <% end %>

    <% if @failed_responses_total.positive? %>
      <div class="col-auto">
        <h3 class="mb-0"><%= "Failed Today: #{@failed_responses_total}" %></h3>
      </div>
    <% end %>
  </div>

  <% if @website.response_count > 0 %>
    <%= render "responses_table", website: @website, responses: @responses, pagination_params: @pagination_params, empty_message: (@show_failed_only ? "No failed responses have been recorded today for this website." : nil) %>
  <% else %>
    <p class="text-muted small mb-0">
      <%= "There are no responses yet for this website." %>
    </p>
  <% end %>

</div>