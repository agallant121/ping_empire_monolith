<section class="surface-block surface-block--nested">
  <div class="table-responsive data-table-wrapper">
    <table class="table align-middle mb-0 failure-table">
      <thead>
        <tr>
          <th scope="col"><%= t("websites.failures.website_header") %></th>
          <th scope="col" class="text-center"><%= t("websites.failures.failures_today_header") %></th>
          <th scope="col"><%= t("websites.failures.last_failure_header") %></th>
        </tr>
      </thead>
      <tbody>
        <% if websites.blank? %>
          <tr>
            <td colspan="3" class="surface-subtitle"><%= t("websites.list.none_found") %></td>
          </tr>
        <% else %>
          <% websites.each do |website| %>
            <% failure_count = failure_counts[website.id].to_i %>
            <% last_failure_time = last_failure_at[website.id] %>
            <tr>
              <td class="fw-semibold">
                <%= link_to website.url, website_path(website, failed: true), class: "text-decoration-none" %>
              </td>
              <td class="text-center">
                <span class="status-chip status-chip--alert"><%= failure_count %></span>
              </td>
              <td>
                <% if last_failure_time.present? %>
                  <%= last_failure_time.in_time_zone("Eastern Time (US & Canada)").strftime("%b %d, %Y %l:%M %p") %>
                <% else %>
                  <span class="surface-subtitle"><%= t("websites.failures.em_dash") %></span>
                <% end %>
              </td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
</section>

